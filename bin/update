#!/usr/bin/env bash
#
# Cleanly updates Mac OS, App store software, Homebrew packages, Neovim
# plugins, the Rust compiler and local Rust crates.

set -euo pipefail

# Install Mac OS and App Store updates
softwareupdate --all --install

# Update Homebrew packages
brew update
brew upgrade

# Ensure dotfiles are linked Neovim and Tmux plugins are up to date
"$HOME/repos/dotfiles/setup.sh"

# Ensure Rust and local crates are up to date
rustup update
# Update all local crates except wasm-bindgen-cli
cargo install-update --all

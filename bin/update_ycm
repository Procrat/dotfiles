#!/usr/bin/env bash
#
# Installs the compiled libraries for the vim plugin YouCompleteMe
# Assuming this is run on Arch Linux (which makes sure pacman can be used and
# there's no need for the development headers of Python.)

set -euo pipefail

echo 'Ensuring cmake is installed...'
type which >/dev/null 2>&1
if [[ $? == 0 ]]; then
    echo '  Yep.'
else
    echo '  Nope. Install cmake pl0x.'
    sudo pacman -Sy cmake
fi

echo 'Installing libs...'
temp_dir=$(mktemp -d)
cd $temp_dir
cmake -G 'Unix Makefiles' . ~/.vim/bundle/YouCompleteMe/third_party/ycmd/cpp
make ycm_support_libs
cd
rm -rf $temp_dir

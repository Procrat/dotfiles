# Mouse interaction
setw -g mode-mouse on
set -g mouse-select-window on
set -g mouse-select-pane on
set -g mouse-resize-pane on

# 1-based index numbering
set -g base-index 1
set -g pane-base-index 1

# Window navigation & manipulation
bind -n M-n new-window
bind -n M-q kill-window
bind -n M-v split-window -h -c '#{pane_current_path}'
bind -n M-s split-window -v -c '#{pane_current_path}'
bind -n M-w kill-pane
bind -n M-f next-window
bind -n M-d previous-window
bind -n M-o rotate-window
bind -n M-z resize-pane -Z
bind -n M-< resize-pane -L 1
bind -n M-> resize-pane -R 1
bind -n M-+ resize-pane -U 1
bind -n M-- resize-pane -D 1

# Integration between vim windows & tmux panes
bind -n M-h run "(tmux display-message -p '#{pane_current_command}' \
                    | grep -iqE '(^|/)vim$' && tmux send-keys C-h) \
                 || tmux select-pane -L"
bind -n M-j run "(tmux display-message -p '#{pane_current_command}' \
                    | grep -iqE '(^|/)vim$' && tmux send-keys C-j) \
                 || tmux select-pane -D"
bind -n M-k run "(tmux display-message -p '#{pane_current_command}' \
                    | grep -iqE '(^|/)vim$' && tmux send-keys C-k) \
                 || tmux select-pane -U"
bind -n M-l run "(tmux display-message -p '#{pane_current_command}' \
                    | grep -iqE '(^|/)vim$' && tmux send-keys C-l) \
                 || tmux select-pane -R"

# Open a man page in new window
bind / command-prompt "split-window 'exec man %%'"

# Start htop in split window
bind '~' split-window "exec htop"

# Set window notifications
setw -g monitor-activity on
set -g visual-activity on

# Status bar
set -g status-interval 1
set -g status-justify centre
set -g status-keys vi
# Minimal status bar:
set -g status-left ""
set -g status-right ""
# Verbose status bar:
# set -g status-left-length 20
# set -g status-left "#[fg=green]#(env date +'%%T') #[fg=red][#S]"
# set -g status-right-length 50
# set -g status-right "#[fg=green]#T"
setw -g window-status-current-format "#F#W"
setw -g window-status-format "#F#W"
setw -g window-status-separator "  "

# Update window titles
set -g set-titles on
set -g set-titles-string "[#S] #T"

# Re-read .tmux.conf while running
bind r source-file ~/.tmux.conf

# Copy-mode settings
setw -g mode-keys vi
set -g history-limit 10000
# v, y and p as in vim. Let it copy to ICCCM clipboard.
bind -n M-c copy-mode
bind -n M-p run 'xclip -o -sel clipboard | tmux load-buffer -' \; paste-buffer
bind -t vi-copy v begin-selection
bind -t vi-copy y copy-pipe 'xclip -i -sel clipboard'
bind -t vi-copy Space halfpage-down
bind -t vi-copy Bspace halfpage-up

# Colorscheme (Solarized)
set -g pane-active-border-style "fg=brightgreen"  # fg=base03
set -g pane-border-style "fg=black"  # base02
set -g status-bg black  # base02
setw -g window-status-current-style "fg=brightblue"  # base0
setw -g window-status-style "fg=brightgreen"  # base01
